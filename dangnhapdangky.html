<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Đăng nhập / Đăng ký</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #ecf0f1;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}
.container {
    background: #fff;
    padding: 30px 40px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    width: 350px;
}
input {
    padding: 10px;
    margin: 10px 0;
    width: 100%;
    box-sizing: border-box;
    border-radius: 5px;
    border: 1px solid #ccc;
}
button {
    padding: 10px;
    width: 100%;
    background:#2980b9;
    color:white;
    border:none;
    border-radius:5px;
    cursor:pointer;
    font-size:16px;
}
button:hover { background:#1f6693; }
.message { font-size: 14px; margin-top:5px; color:red; }
.switch { margin-top: 15px; text-align:center; font-size:14px; }
.switch a { color:#2980b9; text-decoration:none; }
</style>
</head>
<body>

<!-- FORM ĐĂNG NHẬP -->
<div class="container" id="loginForm">
<h2>Đăng nhập</h2>
<input type="text" id="loginUser" placeholder="Email">
<input type="password" id="loginPass" placeholder="Mật khẩu">
<button onclick="dangNhap()">Đăng nhập</button>
<p id="loginMessage" class="message"></p>

<div class="switch">
Chưa có tài khoản? <a href="#" onclick="showRegister()">Đăng ký ngay</a>
</div>
</div>

<!-- FORM ĐĂNG KÝ -->
<div class="container" id="registerForm" style="display:none;">
<h2>Đăng ký</h2>
<input type="text" id="regUser" placeholder="Tên người dùng">
<input type="email" id="regEmail" placeholder="Email">
<input type="password" id="regPass" placeholder="Mật khẩu">
<button onclick="dangKy()">Đăng ký</button>
<p id="registerMessage" class="message"></p>

<div class="switch">
Đã có tài khoản? <a href="#" onclick="showLogin()">Đăng nhập</a>
</div>
</div>

<script>
// Ẩn / Hiện form
function showRegister() {
    document.getElementById("loginForm").style.display = "none";
    document.getElementById("registerForm").style.display = "block";
}
function showLogin() {
    document.getElementById("registerForm").style.display = "none";
    document.getElementById("loginForm").style.display = "block";
}

// ĐĂNG KÝ
function dangKy() {
    let username = document.getElementById("regUser").value.trim();
    let email = document.getElementById("regEmail").value.trim();
    let password = document.getElementById("regPass").value.trim();
    let msg = document.getElementById("registerMessage");

    msg.textContent = "";

    if (!username || !email || !password) {
        msg.textContent = "Vui lòng điền đầy đủ thông tin!";
        return;
    }

    // Kiểm tra email hợp lệ
    let emailCheck = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailCheck.test(email)) {
        msg.textContent = "Email không hợp lệ!";
        return;
    }

    let accounts = JSON.parse(localStorage.getItem("accounts")) || [];

    // Email đã tồn tại
    if (accounts.find(acc => acc.email === email)) {
        msg.textContent = "Email đã được đăng ký!";
        return;
    }

    accounts.push({ username, email, password });
    localStorage.setItem("accounts", JSON.stringify(accounts));

    msg.style.color = "green";
    msg.textContent = "Đăng ký thành công!";

    document.getElementById("regUser").value = "";
    document.getElementById("regEmail").value = "";
    document.getElementById("regPass").value = "";
}

// ĐĂNG NHẬP
function dangNhap() {
    let email = document.getElementById("loginUser").value.trim();
    let password = document.getElementById("loginPass").value.trim();
    let msg = document.getElementById("loginMessage");

    msg.textContent = "";

    if (!email || !password) {
        msg.textContent = "Vui lòng nhập đủ thông tin!";
        return;
    }

    let accounts = JSON.parse(localStorage.getItem("accounts")) || [];
    let user = accounts.find(acc => acc.email === email && acc.password === password);

    if (!user) {
        msg.textContent = "Sai email hoặc mật khẩu!";
        return;
    }

    // Lưu thông tin đăng nhập
    localStorage.setItem("currentUser", JSON.stringify(user));

    // Chuyển trang
    window.location.href = "taikhoan.html";
}
</script>

</body>
</html>
